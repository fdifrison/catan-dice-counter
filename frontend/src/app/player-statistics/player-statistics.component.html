<div class="stats-container">
  <div class="player-select">
    <select class="player-dropdown" [(ngModel)]="selectedPlayerId" (change)="loadPlayerStats()">
      <option [value]="null" disabled>Select a Player</option>
      <option *ngFor="let player of players" [value]="player.id">{{ player.name }}</option>
    </select>
  </div>

  <div class="stats-circles" *ngIf="selectedPlayerId">
    <div class="stat-circle">
      <svg width="100" height="100">
        <circle cx="50" cy="50" r="35" fill="none" stroke="#d4af37" stroke-width="2" />
        <path id="luckyNumberPath" d="M50,15 A35,35 0 1,1 50,85 A35,35 0 1,1 50,15" fill="none" />
        <text font-family="'Cinzel', serif" font-size="12" font-weight="700" fill="#d4af37" text-anchor="middle">
          <textPath href="#luckyNumberPath" startOffset="25%">Lucky Number</textPath>
        </text>
      </svg>
      <span class="circle-value">{{ luckyNumber || '-' }}</span>
    </div>
    <div class="stat-circle">
      <svg width="100" height="100">
        <circle cx="50" cy="50" r="35" fill="none" stroke="#d4af37" stroke-width="2" />
        <path id="totalPointsPath" d="M50,15 A35,35 0 1,1 50,85 A35,35 0 1,1 50,15" fill="none" />
        <text font-family="'Cinzel', serif" font-size="12" font-weight="700" fill="#d4af37" text-anchor="middle">
          <textPath href="#totalPointsPath" startOffset="25%">Total Points</textPath>
        </text>
      </svg>
      <span class="circle-value">{{ totalPoints || 0 }}</span>
    </div>
    <div class="stat-circle">
      <svg width="100" height="100">
        <circle cx="50" cy="50" r="35" fill="none" stroke="#d4af37" stroke-width="2" />
        <path id="averagePointsPath" d="M50,15 A35,35 0 1,1 50,85 A35,35 0 1,1 50,15" fill="none" />
        <text font-family="'Cinzel', serif" font-size="12" font-weight="700" fill="#d4af37" text-anchor="middle">
          <textPath href="#averagePointsPath" startOffset="25%">Average Points</textPath>
        </text>
      </svg>
      <span class="circle-value">{{ averagePoints !== null ? averagePoints.toFixed(1) : '-' }}</span>
    </div>
  </div>

  <div class="chart-container" *ngIf="selectedPlayerId">
    <canvas id="diceRollChart"></canvas>
  </div>

  <div class="chart-container" *ngIf="selectedPlayerId">
    <canvas id="turnTimeChart"></canvas>
  </div>

  <div class="return-home">
    <button class="btn-catan" (click)="returnHome()">Return Home</button>
  </div>
</div>
